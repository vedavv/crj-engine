<!DOCTYPE html>
<html lang="sa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CRJ SoundScape | श्री चागण्टि रामयोगेश्वर ध्वनिलोकः</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600;700&family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&family=Noto+Sans+Devanagari:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
@font-face {
  font-family: 'Vijaya';
  src: url('https://vedavishtaram.in/fonts/VIJAYADV.ttf') format('truetype');
}

:root {
  --deep-sacred: #0a0612;
  --twilight: #1a0f2e;
  --amber-glow: #d4a854;
  --warm-gold: #c5943a;
  --sacred-saffron: #e8a031;
  --flame-accent: #e87831;
  --lotus-pink: #c4607a;
  --sky-blue: #4a8fb8;
  --pale-gold: #f5e6c8;
  --muted-cream: #e8dcc8;
  --text-light: #e8e0d4;
  --text-muted: #9a8e7e;
  --card-bg: rgba(18, 12, 32, 0.85);
  --card-border: rgba(212, 168, 84, 0.15);
  --glass: rgba(255, 255, 255, 0.03);
}

* { margin: 0; padding: 0; box-sizing: border-box; }

html { scroll-behavior: smooth; }

body {
  font-family: 'Cormorant Garamond', 'Noto Sans Devanagari', serif;
  background: var(--deep-sacred);
  color: var(--text-light);
  min-height: 100vh;
  overflow-x: hidden;
}

/* ═══════════════════ COSMIC BACKGROUND ═══════════════════ */
.cosmos {
  position: fixed;
  inset: 0;
  z-index: 0;
  background:
    radial-gradient(ellipse at 20% 50%, rgba(74, 40, 120, 0.15) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 20%, rgba(200, 140, 50, 0.08) 0%, transparent 40%),
    radial-gradient(ellipse at 50% 80%, rgba(100, 50, 30, 0.1) 0%, transparent 50%),
    linear-gradient(180deg, #060310 0%, #0a0612 30%, #120a1e 60%, #0a0612 100%);
}

.cosmos::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image:
    radial-gradient(1px 1px at 10% 20%, rgba(255,255,255,0.4), transparent),
    radial-gradient(1px 1px at 30% 70%, rgba(255,255,255,0.3), transparent),
    radial-gradient(1.5px 1.5px at 50% 10%, rgba(212,168,84,0.5), transparent),
    radial-gradient(1px 1px at 70% 50%, rgba(255,255,255,0.35), transparent),
    radial-gradient(1px 1px at 90% 80%, rgba(255,255,255,0.3), transparent),
    radial-gradient(1.5px 1.5px at 15% 90%, rgba(212,168,84,0.4), transparent),
    radial-gradient(1px 1px at 85% 30%, rgba(255,255,255,0.25), transparent),
    radial-gradient(1px 1px at 45% 45%, rgba(255,255,255,0.2), transparent),
    radial-gradient(1px 1px at 65% 75%, rgba(255,255,255,0.3), transparent),
    radial-gradient(1.2px 1.2px at 25% 55%, rgba(232,160,49,0.35), transparent);
  animation: starTwinkle 8s ease-in-out infinite alternate;
}

@keyframes starTwinkle {
  0% { opacity: 0.6; }
  50% { opacity: 1; }
  100% { opacity: 0.7; }
}

/* ═══════════════════ MAIN CONTAINER ═══════════════════ */
.page-wrapper {
  position: relative;
  z-index: 1;
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
}

/* ═══════════════════ HEADER ═══════════════════ */
.site-header {
  text-align: center;
  padding: 50px 20px 30px;
  position: relative;
}

.om-symbol {
  font-size: 3.2rem;
  color: var(--amber-glow);
  text-shadow: 0 0 30px rgba(212, 168, 84, 0.4);
  animation: omPulse 4s ease-in-out infinite;
  display: block;
  margin-bottom: 10px;
}

@keyframes omPulse {
  0%, 100% { opacity: 0.7; text-shadow: 0 0 20px rgba(212, 168, 84, 0.3); }
  50% { opacity: 1; text-shadow: 0 0 40px rgba(212, 168, 84, 0.6), 0 0 80px rgba(212, 168, 84, 0.2); }
}

.site-title {
  font-family: 'Cinzel', serif;
  font-size: clamp(1.4rem, 3vw, 2.2rem);
  font-weight: 600;
  letter-spacing: 0.25em;
  color: var(--amber-glow);
  text-transform: uppercase;
  margin-bottom: 4px;
}

.site-subtitle-sa {
  font-family: 'Noto Sans Devanagari', 'Vijaya', serif;
  font-size: clamp(1.1rem, 2.5vw, 1.6rem);
  font-weight: 500;
  color: var(--pale-gold);
  margin-bottom: 8px;
  letter-spacing: 0.05em;
}

.site-desc {
  font-family: 'Cormorant Garamond', serif;
  font-size: 0.95rem;
  color: var(--text-muted);
  font-style: italic;
  letter-spacing: 0.1em;
}

.header-line {
  width: 200px;
  height: 1px;
  margin: 25px auto 0;
  background: linear-gradient(90deg, transparent, var(--amber-glow), transparent);
}

/* ═══════════════════ NAVIGATION BAR ═══════════════════ */
.nav-bar {
  display: flex;
  justify-content: center;
  gap: 6px;
  padding: 12px 0;
  flex-wrap: wrap;
  margin-bottom: 30px;
}

.nav-bar a {
  font-family: 'Cinzel', serif;
  font-size: 0.7rem;
  letter-spacing: 0.15em;
  text-transform: uppercase;
  color: var(--text-muted);
  text-decoration: none;
  padding: 6px 14px;
  border: 1px solid rgba(212, 168, 84, 0.1);
  border-radius: 2px;
  transition: all 0.3s ease;
  background: rgba(255,255,255,0.02);
}

.nav-bar a:hover, .nav-bar a.active {
  color: var(--amber-glow);
  border-color: rgba(212, 168, 84, 0.4);
  background: rgba(212, 168, 84, 0.06);
}

/* ═══════════════════ HERO SECTION ═══════════════════ */
.hero {
  text-align: center;
  padding: 40px 20px 50px;
  position: relative;
}

.hero-badge {
  display: inline-block;
  font-family: 'Cinzel', serif;
  font-size: 0.65rem;
  letter-spacing: 0.35em;
  text-transform: uppercase;
  color: var(--sacred-saffron);
  border: 1px solid rgba(232, 160, 49, 0.3);
  padding: 5px 20px;
  margin-bottom: 25px;
  border-radius: 2px;
}

.hero h1 {
  font-family: 'Cinzel', serif;
  font-size: clamp(2rem, 5vw, 3.5rem);
  font-weight: 700;
  letter-spacing: 0.12em;
  color: var(--pale-gold);
  margin-bottom: 8px;
  line-height: 1.2;
}

.hero-sanskrit {
  font-family: 'Noto Sans Devanagari', 'Vijaya', serif;
  font-size: clamp(1.3rem, 3vw, 2rem);
  font-weight: 500;
  color: var(--amber-glow);
  margin-bottom: 15px;
  letter-spacing: 0.08em;
}

.hero-tagline {
  font-family: 'Cormorant Garamond', serif;
  font-size: 1.1rem;
  color: var(--text-muted);
  font-style: italic;
  max-width: 600px;
  margin: 0 auto;
  line-height: 1.6;
}

/* Decorative mandala ring behind hero */
.mandala-ring {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 400px;
  height: 400px;
  border: 1px solid rgba(212, 168, 84, 0.06);
  border-radius: 50%;
  pointer-events: none;
  animation: mandalaSpin 60s linear infinite;
}

.mandala-ring::after {
  content: '';
  position: absolute;
  inset: 30px;
  border: 1px solid rgba(212, 168, 84, 0.04);
  border-radius: 50%;
}

@keyframes mandalaSpin {
  from { transform: translate(-50%, -50%) rotate(0deg); }
  to { transform: translate(-50%, -50%) rotate(360deg); }
}

/* ═══════════════════ SOUNDSCAPE PLAYER ═══════════════════ */
.player-section {
  margin-bottom: 40px;
}

.section-label {
  font-family: 'Cinzel', serif;
  font-size: 0.65rem;
  letter-spacing: 0.4em;
  text-transform: uppercase;
  color: var(--text-muted);
  text-align: center;
  margin-bottom: 20px;
}

.player-card {
  background:
    linear-gradient(135deg, rgba(26, 15, 46, 0.9), rgba(18, 12, 32, 0.95)),
    linear-gradient(45deg, rgba(212, 168, 84, 0.03), transparent);
  border: 1px solid var(--card-border);
  border-radius: 8px;
  padding: 40px;
  position: relative;
  overflow: hidden;
  backdrop-filter: blur(10px);
}

.player-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--amber-glow), transparent);
  opacity: 0.4;
}

/* Waveform visualization container */
.waveform-container {
  position: relative;
  height: 120px;
  margin-bottom: 25px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  border-radius: 6px;
  overflow: hidden;
  background: rgba(0,0,0,0.2);
}

.waveform-canvas {
  width: 100%;
  height: 100%;
  display: block;
}

.waveform-overlay {
  position: absolute;
  inset: 0;
  background: linear-gradient(90deg, rgba(212, 168, 84, 0.1), transparent 30%, transparent 70%, rgba(212, 168, 84, 0.1));
  pointer-events: none;
}

.waveform-time {
  position: absolute;
  bottom: 6px;
  font-family: 'Cinzel', serif;
  font-size: 0.7rem;
  color: var(--text-muted);
  letter-spacing: 0.1em;
}

.waveform-time.current { left: 12px; color: var(--amber-glow); }
.waveform-time.total { right: 12px; }

/* Now Playing Info */
.now-playing {
  text-align: center;
  margin-bottom: 30px;
}

.track-number {
  font-family: 'Cinzel', serif;
  font-size: 0.6rem;
  letter-spacing: 0.4em;
  text-transform: uppercase;
  color: var(--sacred-saffron);
  margin-bottom: 6px;
}

.track-title-sa {
  font-family: 'Noto Sans Devanagari', 'Vijaya', serif;
  font-size: 1.6rem;
  font-weight: 600;
  color: var(--pale-gold);
  margin-bottom: 4px;
}

.track-title-en {
  font-family: 'Cormorant Garamond', serif;
  font-size: 1rem;
  color: var(--text-muted);
  font-style: italic;
  letter-spacing: 0.1em;
}

/* Transport Controls */
.transport {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 20px;
  margin-bottom: 30px;
}

.transport-btn {
  background: none;
  border: none;
  cursor: pointer;
  color: var(--text-muted);
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 8px;
}

.transport-btn:hover {
  color: var(--amber-glow);
}

.transport-btn svg {
  width: 22px;
  height: 22px;
  fill: currentColor;
}

.play-btn {
  width: 64px;
  height: 64px;
  border-radius: 50%;
  border: 2px solid var(--amber-glow);
  background: rgba(212, 168, 84, 0.08);
  color: var(--amber-glow);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
  position: relative;
}

.play-btn::before {
  content: '';
  position: absolute;
  inset: -6px;
  border-radius: 50%;
  border: 1px solid rgba(212, 168, 84, 0.15);
  transition: all 0.3s ease;
}

.play-btn:hover {
  background: rgba(212, 168, 84, 0.15);
  box-shadow: 0 0 30px rgba(212, 168, 84, 0.2);
}

.play-btn:hover::before {
  border-color: rgba(212, 168, 84, 0.3);
}

.play-btn svg {
  width: 26px;
  height: 26px;
  fill: currentColor;
  margin-left: 3px;
}

.play-btn.playing svg { margin-left: 0; }

/* Speed control */
.speed-control {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  margin-bottom: 25px;
}

.speed-label {
  font-family: 'Cinzel', serif;
  font-size: 0.6rem;
  letter-spacing: 0.2em;
  text-transform: uppercase;
  color: var(--text-muted);
}

.speed-btns {
  display: flex;
  gap: 4px;
}

.speed-btn {
  font-family: 'Cinzel', serif;
  font-size: 0.65rem;
  padding: 4px 10px;
  border: 1px solid rgba(212, 168, 84, 0.15);
  background: transparent;
  color: var(--text-muted);
  cursor: pointer;
  border-radius: 2px;
  transition: all 0.3s ease;
  letter-spacing: 0.05em;
}

.speed-btn:hover, .speed-btn.active {
  border-color: var(--amber-glow);
  color: var(--amber-glow);
  background: rgba(212, 168, 84, 0.08);
}

/* Volume Control */
.volume-row {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
}

.volume-icon {
  color: var(--text-muted);
  cursor: pointer;
  transition: color 0.3s;
}

.volume-icon:hover { color: var(--amber-glow); }

.volume-icon svg { width: 18px; height: 18px; fill: currentColor; }

.volume-slider {
  -webkit-appearance: none;
  appearance: none;
  width: 120px;
  height: 2px;
  background: rgba(212, 168, 84, 0.2);
  border-radius: 1px;
  outline: none;
  cursor: pointer;
}

.volume-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: var(--amber-glow);
  cursor: pointer;
  border: none;
  box-shadow: 0 0 10px rgba(212, 168, 84, 0.3);
}

.volume-slider::-moz-range-thumb {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: var(--amber-glow);
  cursor: pointer;
  border: none;
}

/* ═══════════════════ TRACK LIST ═══════════════════ */
.tracklist-section {
  margin-bottom: 50px;
}

.tracklist {
  background: var(--card-bg);
  border: 1px solid var(--card-border);
  border-radius: 8px;
  overflow: hidden;
}

.track-item {
  display: grid;
  grid-template-columns: 40px 1fr auto auto;
  align-items: center;
  gap: 16px;
  padding: 16px 24px;
  cursor: pointer;
  transition: all 0.3s ease;
  border-bottom: 1px solid rgba(212, 168, 84, 0.05);
  position: relative;
}

.track-item:last-child { border-bottom: none; }

.track-item:hover {
  background: rgba(212, 168, 84, 0.04);
}

.track-item.active {
  background: rgba(212, 168, 84, 0.06);
}

.track-item.active::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 2px;
  background: var(--amber-glow);
}

.track-idx {
  font-family: 'Cinzel', serif;
  font-size: 0.75rem;
  color: var(--text-muted);
  text-align: center;
  letter-spacing: 0.05em;
}

.track-item.active .track-idx {
  color: var(--amber-glow);
}

.track-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.track-name-sa {
  font-family: 'Noto Sans Devanagari', 'Vijaya', serif;
  font-size: 1.05rem;
  font-weight: 500;
  color: var(--text-light);
}

.track-item.active .track-name-sa {
  color: var(--pale-gold);
}

.track-name-en {
  font-family: 'Cormorant Garamond', serif;
  font-size: 0.8rem;
  color: var(--text-muted);
  font-style: italic;
}

.track-veda {
  font-family: 'Cinzel', serif;
  font-size: 0.55rem;
  letter-spacing: 0.2em;
  text-transform: uppercase;
  color: var(--sacred-saffron);
  opacity: 0.7;
  white-space: nowrap;
}

.track-dur {
  font-family: 'Cinzel', serif;
  font-size: 0.7rem;
  color: var(--text-muted);
  letter-spacing: 0.1em;
  min-width: 40px;
  text-align: right;
}

/* Playing indicator animation */
.playing-indicator {
  display: none;
  gap: 2px;
  align-items: flex-end;
  height: 14px;
}

.track-item.active.is-playing .playing-indicator {
  display: flex;
}

.track-item.active.is-playing .track-idx-text {
  display: none;
}

.playing-bar {
  width: 2px;
  background: var(--amber-glow);
  animation: barPulse 0.8s ease-in-out infinite;
  border-radius: 1px;
}

.playing-bar:nth-child(1) { height: 6px; animation-delay: 0s; }
.playing-bar:nth-child(2) { height: 10px; animation-delay: 0.15s; }
.playing-bar:nth-child(3) { height: 4px; animation-delay: 0.3s; }
.playing-bar:nth-child(4) { height: 8px; animation-delay: 0.45s; }

@keyframes barPulse {
  0%, 100% { transform: scaleY(0.5); }
  50% { transform: scaleY(1); }
}

/* ═══════════════════ ABOUT SECTION ═══════════════════ */
.about-section {
  text-align: center;
  padding: 40px 20px;
  margin-bottom: 40px;
}

.about-section h2 {
  font-family: 'Cinzel', serif;
  font-size: 0.65rem;
  letter-spacing: 0.4em;
  text-transform: uppercase;
  color: var(--text-muted);
  margin-bottom: 20px;
}

.about-text {
  font-family: 'Cormorant Garamond', serif;
  font-size: 1.05rem;
  line-height: 1.8;
  color: var(--text-muted);
  max-width: 700px;
  margin: 0 auto;
}

.about-text .highlight {
  color: var(--pale-gold);
  font-weight: 600;
}

.sanskrit-verse {
  font-family: 'Noto Sans Devanagari', 'Vijaya', serif;
  font-size: 1.1rem;
  color: var(--amber-glow);
  margin: 20px 0;
  line-height: 2;
  font-weight: 500;
}

/* ═══════════════════ FOOTER ═══════════════════ */
.site-footer {
  text-align: center;
  padding: 40px 20px;
  border-top: 1px solid rgba(212, 168, 84, 0.08);
}

.footer-om {
  font-size: 1.5rem;
  color: var(--amber-glow);
  opacity: 0.5;
  margin-bottom: 12px;
}

.footer-text {
  font-family: 'Cinzel', serif;
  font-size: 0.6rem;
  letter-spacing: 0.25em;
  text-transform: uppercase;
  color: var(--text-muted);
  opacity: 0.5;
}

.footer-sa {
  font-family: 'Noto Sans Devanagari', 'Vijaya', serif;
  font-size: 0.85rem;
  color: var(--text-muted);
  opacity: 0.4;
  margin-top: 8px;
}

/* ═══════════════════ RESPONSIVE ═══════════════════ */
@media (max-width: 768px) {
  .player-card { padding: 24px 16px; }
  .waveform-container { height: 80px; }
  .track-item {
    grid-template-columns: 30px 1fr auto;
    padding: 12px 16px;
    gap: 12px;
  }
  .track-veda { display: none; }
  .transport { gap: 14px; }
  .play-btn { width: 56px; height: 56px; }
  .mandala-ring { width: 280px; height: 280px; }
}

@media (max-width: 480px) {
  .site-header { padding: 30px 10px 20px; }
  .hero { padding: 20px 10px 30px; }
  .nav-bar a { font-size: 0.6rem; padding: 5px 10px; }
}

/* ═══════════════════ SCROLL ANIMATIONS ═══════════════════ */
.fade-in {
  opacity: 0;
  transform: translateY(20px);
  animation: fadeInUp 0.8s ease forwards;
}

.fade-in:nth-child(2) { animation-delay: 0.15s; }
.fade-in:nth-child(3) { animation-delay: 0.3s; }

@keyframes fadeInUp {
  to { opacity: 1; transform: translateY(0); }
}

/* Loading state */
.loading-state {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 20px;
  color: var(--text-muted);
  font-family: 'Cormorant Garamond', serif;
  font-style: italic;
}

.loading-dot {
  width: 4px;
  height: 4px;
  border-radius: 50%;
  background: var(--amber-glow);
  animation: loadPulse 1.2s ease-in-out infinite;
}

.loading-dot:nth-child(2) { animation-delay: 0.2s; }
.loading-dot:nth-child(3) { animation-delay: 0.4s; }

@keyframes loadPulse {
  0%, 100% { opacity: 0.3; transform: scale(0.8); }
  50% { opacity: 1; transform: scale(1.2); }
}

/* Repeat toggle */
.repeat-btn.active { color: var(--amber-glow); }
</style>
</head>
<body>

<div class="cosmos"></div>

<div class="page-wrapper">

  <!-- HEADER -->
  <header class="site-header fade-in">
    <span class="om-symbol">&#x0950;</span>
    <h2 class="site-title">Veda Vij&#xF1;&#x101;na Vi&#x1E63;&#x1E6D;aram</h2>
    <div class="site-subtitle-sa">&#x0935;&#x0947;&#x0926; &#x0935;&#x093F;&#x091C;&#x094D;&#x091E;&#x093E;&#x0928; &#x0935;&#x093F;&#x0937;&#x094D;&#x091F;&#x0930;&#x092E;&#x094D;</div>
    <p class="site-desc">An Institution of Eminence for Vedic Education</p>
    <div class="header-line"></div>
  </header>

  <!-- NAVIGATION -->
  <nav class="nav-bar fade-in">
    <a href="https://vedavishtaram.in/">Home</a>
    <a href="https://vedavishtaram.in/vkg/">VKG</a>
    <a href="#" class="active">CRJ SoundScape</a>
    <a href="/index.html">Analyze</a>
    <a href="https://vedavishtaram.in/veda/samaveda.html">S&#x101;maveda</a>
    <a href="https://vedavishtaram.in/team/">Faculty</a>
  </nav>

  <!-- HERO -->
  <section class="hero fade-in">
    <div class="mandala-ring"></div>
    <div class="hero-badge">Sacred Audio Archive</div>
    <h1>CRJ SoundScape</h1>
    <div class="hero-sanskrit">&#x0927;&#x094D;&#x0935;&#x0928;&#x093F;&#x0932;&#x094B;&#x0915;&#x0903;</div>
    <p class="hero-tagline">
      A curated collection of sacred Vedic recitations &#x2014; S&#x101;maveda Setu,
      Mantras, and devotional hymns &#x2014; preserved in memory of
      &#x0936;&#x094D;&#x0930;&#x0940; &#x091A;&#x093E;&#x0917;&#x0923;&#x094D;&#x091F;&#x093F; &#x0930;&#x093E;&#x092E;&#x092F;&#x094B;&#x0917;&#x0947;&#x0936;&#x094D;&#x0935;&#x0930;&#x0930;&#x093E;&#x0935;
    </p>
  </section>

  <!-- PLAYER -->
  <section class="player-section fade-in">
    <div class="section-label">Now Listening</div>
    <div class="player-card">

      <div class="waveform-container" id="waveformContainer">
        <canvas class="waveform-canvas" id="waveformCanvas"></canvas>
        <div class="waveform-overlay"></div>
        <span class="waveform-time current" id="currentTime">0:00</span>
        <span class="waveform-time total" id="totalTime">0:00</span>
      </div>

      <div class="now-playing">
        <div class="track-number" id="trackNumber">Track 1 of 6</div>
        <div class="track-title-sa" id="trackTitleSa">&#x0938;&#x093E;&#x092E;&#x0935;&#x0947;&#x0926; &#x2014; &#x0938;&#x0947;&#x0924;&#x0941;&#x0903; &#x0967;</div>
        <div class="track-title-en" id="trackTitleEn">S&#x101;maveda &#x2014; Setu 1</div>
      </div>

      <div class="transport">
        <button class="transport-btn" id="prevBtn" title="Previous">
          <svg viewBox="0 0 24 24"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/></svg>
        </button>
        <button class="transport-btn" id="rewindBtn" title="Rewind 10s">
          <svg viewBox="0 0 24 24"><path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"/><text x="10" y="16" font-size="7" fill="currentColor" text-anchor="middle" font-family="sans-serif">10</text></svg>
        </button>
        <button class="play-btn" id="playBtn" title="Play">
          <svg id="playIcon" viewBox="0 0 24 24"><polygon points="8,5 19,12 8,19"/></svg>
          <svg id="pauseIcon" viewBox="0 0 24 24" style="display:none"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
        </button>
        <button class="transport-btn" id="forwardBtn" title="Forward 10s">
          <svg viewBox="0 0 24 24"><path d="M12 5V1l5 5-5 5V7c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6h2c0 4.42-3.58 8-8 8s-8-3.58-8-8 3.58-8 8-8z"/><text x="14" y="16" font-size="7" fill="currentColor" text-anchor="middle" font-family="sans-serif">10</text></svg>
        </button>
        <button class="transport-btn" id="nextBtn" title="Next">
          <svg viewBox="0 0 24 24"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></svg>
        </button>
      </div>

      <div class="speed-control">
        <span class="speed-label">Speed</span>
        <div class="speed-btns">
          <button class="speed-btn" data-speed="0.5">0.5x</button>
          <button class="speed-btn" data-speed="0.75">0.75x</button>
          <button class="speed-btn active" data-speed="1">1x</button>
          <button class="speed-btn" data-speed="1.25">1.25x</button>
          <button class="speed-btn" data-speed="1.5">1.5x</button>
        </div>
      </div>

      <div class="volume-row">
        <span class="volume-icon" id="volumeIcon">
          <svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
        </span>
        <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="80">
        <button class="transport-btn repeat-btn" id="repeatBtn" title="Repeat">
          <svg viewBox="0 0 24 24" width="18" height="18"><path d="M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z" fill="currentColor"/></svg>
        </button>
      </div>
    </div>
  </section>

  <!-- TRACK LIST -->
  <section class="tracklist-section fade-in">
    <div class="section-label">Sacred Recitations</div>
    <div class="tracklist" id="tracklist"></div>
  </section>

  <!-- ABOUT -->
  <section class="about-section fade-in">
    <h2>About This Collection</h2>
    <div class="sanskrit-verse">
      &#x0917;&#x093E;&#x092F;&#x0924;&#x094D;&#x0930;&#x0940; &#x091B;&#x0928;&#x094D;&#x0926;&#x0938;&#x093E;&#x092E;&#x0939;&#x092E;&#x094D;<br>
      &#x2014; &#x0936;&#x094D;&#x0930;&#x0940;&#x092E;&#x0926;&#x094D;&#x092D;&#x0917;&#x0935;&#x0926;&#x094D;&#x0917;&#x0940;&#x0924;&#x093E; &#x0967;&#x0966;.&#x0969;&#x096B;
    </div>
    <p class="about-text">
      This <span class="highlight">SoundScape</span> preserves sacred Vedic recitations
      from the tradition of <span class="highlight">S&#x101;maveda</span> &#x2014; the Veda of Melody.
      Each Setu (&#x0938;&#x0947;&#x0924;&#x0941;&#x0903;) represents a bridge between the human voice and the divine,
      carrying forward an unbroken oral tradition spanning millennia.
      Curated by <span class="highlight">Dr. Vamshi Krishna Ghanapaathi</span>
      (&#x0935;&#x0947;&#x0926;&#x0928;&#x093F;&#x0927;&#x093F;, &#x0935;&#x093E;&#x091A;&#x0938;&#x094D;&#x092A;&#x0924;&#x093F;) in loving memory of
      <span class="highlight">&#x0936;&#x094D;&#x0930;&#x0940; &#x091A;&#x093E;&#x0917;&#x0923;&#x094D;&#x091F;&#x093F; &#x0930;&#x093E;&#x092E;&#x092F;&#x094B;&#x0917;&#x0947;&#x0936;&#x094D;&#x0935;&#x0930;&#x0930;&#x093E;&#x0935;</span>.
    </p>
  </section>

  <!-- FOOTER -->
  <footer class="site-footer">
    <div class="footer-om">&#x0950;</div>
    <div class="footer-text">Veda Vij&#xF1;&#x101;na Vi&#x1E63;&#x1E6D;aram &#x2014; CRJ SoundScape</div>
    <div class="footer-sa">&#xA9; &#x0935;&#x0947;&#x0926; &#x0935;&#x093F;&#x091C;&#x094D;&#x091E;&#x093E;&#x0928; &#x0935;&#x093F;&#x0937;&#x094D;&#x091F;&#x0930;&#x092E;&#x094D; &#x0968;&#x0966;&#x0968;&#x096C;</div>
  </footer>

</div>

<audio id="audioPlayer" preload="auto"></audio>

<script>
const TRACKS = [
  {
    id: 1,
    titleSa: "\u0938\u093E\u092E\u0935\u0947\u0926 \u2014 \u0938\u0947\u0924\u0941\u0903 \u0967",
    titleEn: "S\u0101maveda \u2014 Setu 1",
    veda: "S\u0101maveda",
    src: "/audio/Sama_1_Setu.m4a",
    duration: "0:30"
  },
  {
    id: 2,
    titleSa: "\u0938\u093E\u092E\u0935\u0947\u0926 \u2014 \u0938\u0947\u0924\u0941\u0903 \u0968",
    titleEn: "S\u0101maveda \u2014 Setu 2",
    veda: "S\u0101maveda",
    src: "",
    duration: "\u2014"
  },
  {
    id: 3,
    titleSa: "\u0938\u093E\u092E\u0935\u0947\u0926 \u2014 \u0938\u0947\u0924\u0941\u0903 \u0969",
    titleEn: "S\u0101maveda \u2014 Setu 3",
    veda: "S\u0101maveda",
    src: "",
    duration: "\u2014"
  },
  {
    id: 4,
    titleSa: "\u090B\u0917\u094D\u0935\u0947\u0926 \u092E\u0928\u094D\u0924\u094D\u0930\u093E\u0903",
    titleEn: "\u1E5Agveda Mantras",
    veda: "\u1E5Agveda",
    src: "",
    duration: "\u2014"
  },
  {
    id: 5,
    titleSa: "\u092F\u091C\u0941\u0930\u094D\u0935\u0947\u0926 \u092A\u094D\u0930\u0936\u0938\u094D\u0924\u093F\u0903",
    titleEn: "Yajurveda Recitation",
    veda: "Yajurveda",
    src: "",
    duration: "\u2014"
  },
  {
    id: 6,
    titleSa: "\u092D\u0915\u094D\u0924\u093F\u092A\u0926\u092E\u094D",
    titleEn: "Devotional Hymn",
    veda: "Bhakti",
    src: "",
    duration: "\u2014"
  }
];

let currentTrackIdx = 0;
let isPlaying = false;
let isRepeat = false;

const audio = document.getElementById('audioPlayer');
const playBtn = document.getElementById('playBtn');
const playIcon = document.getElementById('playIcon');
const pauseIcon = document.getElementById('pauseIcon');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const rewindBtn = document.getElementById('rewindBtn');
const forwardBtn = document.getElementById('forwardBtn');
const repeatBtn = document.getElementById('repeatBtn');
const currentTimeEl = document.getElementById('currentTime');
const totalTimeEl = document.getElementById('totalTime');
const trackNumber = document.getElementById('trackNumber');
const trackTitleSa = document.getElementById('trackTitleSa');
const trackTitleEn = document.getElementById('trackTitleEn');
const volumeSlider = document.getElementById('volumeSlider');
const waveformCanvas = document.getElementById('waveformCanvas');
const waveformContainer = document.getElementById('waveformContainer');
const ctx = waveformCanvas.getContext('2d');

let animFrameId;
let analyser, dataArray;

function initAudioContext() {
  if (analyser) return;
  const ac = new (window.AudioContext || window.webkitAudioContext)();
  const source = ac.createMediaElementSource(audio);
  analyser = ac.createAnalyser();
  analyser.fftSize = 256;
  source.connect(analyser);
  analyser.connect(ac.destination);
  dataArray = new Uint8Array(analyser.frequencyBinCount);
}

function resizeCanvas() {
  const rect = waveformContainer.getBoundingClientRect();
  waveformCanvas.width = rect.width * window.devicePixelRatio;
  waveformCanvas.height = rect.height * window.devicePixelRatio;
  ctx.scale(window.devicePixelRatio, window.devicePixelRatio);
}

function drawWaveform() {
  const w = waveformContainer.clientWidth;
  const h = waveformContainer.clientHeight;
  ctx.clearRect(0, 0, w, h);

  if (analyser && isPlaying) {
    analyser.getByteFrequencyData(dataArray);
  }

  const barCount = 80;
  const barWidth = w / barCount - 2;
  const centerY = h / 2;
  const progress = audio.duration ? audio.currentTime / audio.duration : 0;

  for (let i = 0; i < barCount; i++) {
    const x = i * (barWidth + 2);
    let barH;

    if (analyser && isPlaying && dataArray) {
      const dataIdx = Math.floor(i * dataArray.length / barCount);
      barH = (dataArray[dataIdx] / 255) * (h * 0.4) + 2;
    } else {
      const seed = Math.sin(i * 0.3) * 0.5 + Math.sin(i * 0.7) * 0.3 + Math.cos(i * 0.15) * 0.2;
      barH = Math.abs(seed) * h * 0.35 + 3;
    }

    const isPast = (i / barCount) <= progress;

    ctx.fillStyle = isPast ? 'rgba(212, 168, 84, 0.8)' : 'rgba(212, 168, 84, 0.2)';
    ctx.fillRect(x, centerY - barH / 2, barWidth, barH / 2);

    ctx.fillStyle = isPast ? 'rgba(212, 168, 84, 0.5)' : 'rgba(212, 168, 84, 0.12)';
    ctx.fillRect(x, centerY, barWidth, barH / 2);
  }

  if (audio.duration) {
    const px = progress * w;
    ctx.strokeStyle = 'rgba(232, 160, 49, 0.9)';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(px, 0);
    ctx.lineTo(px, h);
    ctx.stroke();
  }

  animFrameId = requestAnimationFrame(drawWaveform);
}

function renderTracklist() {
  const container = document.getElementById('tracklist');
  container.innerHTML = TRACKS.map((t, i) => `
    <div class="track-item ${i === currentTrackIdx ? 'active' : ''} ${i === currentTrackIdx && isPlaying ? 'is-playing' : ''}"
         data-idx="${i}" onclick="selectTrack(${i})">
      <div class="track-idx">
        <span class="track-idx-text">${String(t.id).padStart(2, '0')}</span>
        <div class="playing-indicator">
          <div class="playing-bar"></div>
          <div class="playing-bar"></div>
          <div class="playing-bar"></div>
          <div class="playing-bar"></div>
        </div>
      </div>
      <div class="track-info">
        <div class="track-name-sa">${t.titleSa}</div>
        <div class="track-name-en">${t.titleEn}</div>
      </div>
      <div class="track-veda">${t.veda}</div>
      <div class="track-dur">${t.duration}</div>
    </div>
  `).join('');
}

function formatTime(s) {
  if (!s || isNaN(s)) return '0:00';
  const m = Math.floor(s / 60);
  const sec = Math.floor(s % 60);
  return m + ':' + sec.toString().padStart(2, '0');
}

function loadTrack(idx) {
  currentTrackIdx = idx;
  const track = TRACKS[idx];
  trackNumber.textContent = 'Track ' + (idx + 1) + ' of ' + TRACKS.length;
  trackTitleSa.textContent = track.titleSa;
  trackTitleEn.textContent = track.titleEn;

  if (track.src) {
    audio.src = track.src;
    audio.load();
  } else {
    audio.removeAttribute('src');
    audio.load();
  }

  currentTimeEl.textContent = '0:00';
  totalTimeEl.textContent = track.duration;
  renderTracklist();
}

function togglePlay() {
  const track = TRACKS[currentTrackIdx];
  if (!track.src) return;
  if (!analyser) initAudioContext();

  if (isPlaying) {
    audio.pause();
    isPlaying = false;
  } else {
    audio.play();
    isPlaying = true;
  }
  updatePlayState();
}

function updatePlayState() {
  playIcon.style.display = isPlaying ? 'none' : 'block';
  pauseIcon.style.display = isPlaying ? 'block' : 'none';
  playBtn.classList.toggle('playing', isPlaying);
  renderTracklist();
}

function selectTrack(idx) {
  const wasPlaying = isPlaying;
  if (isPlaying) { audio.pause(); isPlaying = false; }
  loadTrack(idx);
  const track = TRACKS[idx];
  if (track.src) {
    if (!analyser) initAudioContext();
    audio.play().then(() => { isPlaying = true; updatePlayState(); }).catch(() => {});
  }
  updatePlayState();
}

function playNext() {
  let next = currentTrackIdx + 1;
  if (next >= TRACKS.length) next = 0;
  selectTrack(next);
}

function playPrev() {
  if (audio.currentTime > 3) { audio.currentTime = 0; return; }
  let prev = currentTrackIdx - 1;
  if (prev < 0) prev = TRACKS.length - 1;
  selectTrack(prev);
}

playBtn.addEventListener('click', togglePlay);
nextBtn.addEventListener('click', playNext);
prevBtn.addEventListener('click', playPrev);
rewindBtn.addEventListener('click', () => { audio.currentTime = Math.max(0, audio.currentTime - 10); });
forwardBtn.addEventListener('click', () => { audio.currentTime = Math.min(audio.duration || 0, audio.currentTime + 10); });

repeatBtn.addEventListener('click', () => {
  isRepeat = !isRepeat;
  repeatBtn.classList.toggle('active', isRepeat);
  audio.loop = isRepeat;
});

volumeSlider.addEventListener('input', (e) => { audio.volume = e.target.value / 100; });
audio.volume = 0.8;

document.querySelectorAll('.speed-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.speed-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    audio.playbackRate = parseFloat(btn.dataset.speed);
  });
});

audio.addEventListener('timeupdate', () => { currentTimeEl.textContent = formatTime(audio.currentTime); });
audio.addEventListener('loadedmetadata', () => { totalTimeEl.textContent = formatTime(audio.duration); });
audio.addEventListener('ended', () => { if (!isRepeat) { isPlaying = false; updatePlayState(); playNext(); } });
audio.addEventListener('pause', () => { isPlaying = false; updatePlayState(); });
audio.addEventListener('play', () => { isPlaying = true; updatePlayState(); });

waveformContainer.addEventListener('click', (e) => {
  if (!audio.duration) return;
  const rect = waveformContainer.getBoundingClientRect();
  const pct = (e.clientX - rect.left) / rect.width;
  audio.currentTime = pct * audio.duration;
});

document.addEventListener('keydown', (e) => {
  if (e.code === 'Space') { e.preventDefault(); togglePlay(); }
  if (e.code === 'ArrowRight') { audio.currentTime = Math.min(audio.duration || 0, audio.currentTime + 5); }
  if (e.code === 'ArrowLeft') { audio.currentTime = Math.max(0, audio.currentTime - 5); }
});

window.addEventListener('resize', resizeCanvas);
resizeCanvas();
loadTrack(0);
drawWaveform();
</script>

</body>
</html>
